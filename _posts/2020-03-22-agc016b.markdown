---
layout: post
title:  "AtCoder Grand Contest 016 B - Colorful Hats"
date:   2020-03-22
categories: contest
---

# 問題
<https://atcoder.jp/contests/agc016/tasks/agc016_b>

# 解説
すべての色の種類数を$c$とする.

明らかに$c = \max_{1 \leq i \leq N} \\{ a_{i} \\}$または$c = \max_{1 \leq i \leq N} \\{ a_{i} \\} + 1$であるので, $c$を固定してそれぞれの場合についてYesかNoか調べる.

まず, $i = 1, 2, \ldots, N$について$a_{i} = c$または$a_{i} = c-1$が成り立っている必要がある. 成り立っていないならば, この$c$に関して答えはNoである. 以下これが成り立っているとする.

今, 全部で$c$色存在することから, 初めに適当な猫を$c$匹選んですべて異なる色に塗ってしまっても一般性を失わないのでそのようにする.  
すると, 「残りの$N - c$匹の色が定まっていない猫を$c$個の互いに区別ができる箱に入れて指定された条件を満たすようにできるか?」という問題に帰着される.

猫を$1$匹ずつ箱に入れていくことを考える. このとき次の2パターンの入れ方が考えられる.
1. 猫が$1$匹しか入っていない箱に猫を追加する. このとき$c-1$と発言する猫が$1$匹減少し, $c$と発言する猫が$2$匹増加する.
1. 猫が$2$匹以上入っている箱に猫を追加する. このとき$c-1$と発言する猫の数は変化せず, $c$と発言する猫が$1$匹増加する.

すべての猫を箱に入れ終わるまでにパターン1が行われる回数を$x$, パターン2が行われる回数を$y$とする.  
$r = N - c$とすると, $r = x + y$である.  
さらに, $a_{i} = c-1$であるような$i$の個数を$s$, $a_{i} = c$であるような$i$の個数を$t$とする.  
すると, 次の連立一次方程式を解けばよいことになる.
\\[
\left[
    \begin{array}{c}
        c \\\\\
        0
    \end{array}
\right]
+
\left[
    \begin{array}{cc}
        -1 & 0 \\\\\
        2 & 1
    \end{array}
\right]
\left[
    \begin{array}{c}
        x \\\\\
        y
    \end{array}
\right]
=
\left[
    \begin{array}{c}
        s \\\\\
        t
    \end{array}
\right]
\\]
これを解くと,
\\[
\left[
    \begin{array}{c}
        x \\\\\
        y
    \end{array}
\right]
=
\left[
    \begin{array}{c}
        c - s \\\\\
        -2c + 2s + t
    \end{array}
\right]
\\]
がわかる.  
ただし注意点として, $0 \leq x \leq r$かつ$0 \leq y \leq r$である必要がある. また, パターン2を行う際はパターン1が既に1回以上行われている必要がある. すなわち, $y \geq 1$のときは$x \geq 1$である必要がある. ちなみに$r = x + y$については自動的に成り立っている. 逆にこれらの注意点を満たしていればそれに対応する操作が行えるので答えはYesである.

# 提出
<https://atcoder.jp/contests/agc016/submissions/11077402>